# üí∞ Monobank OBS Server

–°–∏—Å—Ç–µ–º–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –¥–æ–Ω–∞—Ç—ñ–≤ –∑ Monobank API –¥–ª—è OBS Studio –∑ real-time —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º–∏ —Ç–∞ –∫—Ä–∞—Å–∏–≤–∏–º–∏ –∞–Ω—ñ–º–∞—Ü—ñ—è–º–∏.

## üöÄ –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- **Real-time –¥–æ–Ω–∞—Ç–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ Monobank API –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
- **OBS –æ–≤–µ—Ä–ª–µ–π**: –ì–æ—Ç–æ–≤–∏–π –æ–≤–µ—Ä–ª–µ–π –∑ –∞–Ω—ñ–º–∞—Ü—ñ—è–º–∏ –¥–ª—è —Å—Ç—Ä—ñ–º—ñ–≤
- **üîä –ó–≤—É–∫–æ–≤—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è**: MP3 –∑–≤—É–∫–∏ —Ä—ñ–∑–Ω–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Å—É–º–∏ –¥–æ–Ω–∞—Ç—É
- **üìä –ë–∞–Ω–∫–∞-–ø—Ä–æ–≥—Ä–µ—Å**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –±–∞–Ω–∫–æ—é –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ü—ñ–ª—ñ –∑–±–æ—Ä—É
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–æ–Ω–∞—Ç—ñ–≤, —Ç–æ–ø –¥–æ–Ω–∞—Ç–µ—Ä—ñ–≤
- **WebSocket**: –ú–∏—Ç—Ç—î–≤—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –Ω–æ–≤—ñ –¥–æ–Ω–∞—Ç–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω**: –ü—Ä–∞—Ü—é—î –Ω–∞ –≤—Å—ñ—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö
- **–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –º–æ–≤–∞**: –ü–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
DonatPlatform/
‚îú‚îÄ‚îÄ server.js              # –û—Å–Ω–æ–≤–Ω–∏–π —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ database.js            # –†–æ–±–æ—Ç–∞ –∑ SQLite –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ logger.js              # –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ validation.js          # –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ –±–µ–∑–ø–µ–∫–∞
‚îú‚îÄ‚îÄ generate_sounds.js     # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è MP3 –∑–≤—É–∫—ñ–≤
‚îú‚îÄ‚îÄ package.json           # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø—Ä–æ–µ–∫—Ç—É
‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ SOUND_SETUP.md        # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–≤—É–∫—ñ–≤
‚îî‚îÄ‚îÄ public/               # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏
    ‚îú‚îÄ‚îÄ index.html        # –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
    ‚îú‚îÄ‚îÄ donations.html    # –°—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–æ–Ω–∞—Ç—ñ–≤
    ‚îú‚îÄ‚îÄ donations.css     # –°—Ç–∏–ª—ñ –¥–ª—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–æ–Ω–∞—Ç—ñ–≤
    ‚îú‚îÄ‚îÄ donations.js      # JavaScript –¥–ª—è –¥–æ–Ω–∞—Ç—ñ–≤
    ‚îú‚îÄ‚îÄ obs.html          # OBS –æ–≤–µ—Ä–ª–µ–π
    ‚îú‚îÄ‚îÄ camera-jar.html   # –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –±–∞–Ω–∫–∏ –¥–ª—è –∫–∞–º–µ—Ä–∏
    ‚îî‚îÄ‚îÄ sounds/           # MP3 –∑–≤—É–∫–∏ –¥–ª—è –¥–æ–Ω–∞—Ç—ñ–≤
        ‚îú‚îÄ‚îÄ tiny-donation.mp3    # < 100‚Ç¥
        ‚îú‚îÄ‚îÄ small-donation.mp3   # 100-499‚Ç¥  
        ‚îú‚îÄ‚îÄ medium-donation.mp3  # 500-999‚Ç¥
        ‚îî‚îÄ‚îÄ big-donation.mp3     # 1000‚Ç¥+
```

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π:**
```bash
git clone <repository-url>
cd DonatPlatform
npm install
```

2. **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```bash
cp .env.example .env
```

3. **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è .env —Ñ–∞–π–ª—É:**
```env
MONO_TOKEN=your_monobank_token_here
PORT=3000
WS_PORT=8080
DONATION_GOAL=10000
```

4. **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—É–∫—ñ–≤ (–æ–ø—Ü—ñ–π–Ω–æ):**
```bash
node generate_sounds.js
```

5. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
npm start
```

## üîë –û—Ç—Ä–∏–º–∞–Ω–Ω—è Monobank Token

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ [api.monobank.ua](https://api.monobank.ua/)
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—è —á–µ—Ä–µ–∑ Monobank
3. –°—Ç–≤–æ—Ä—ñ—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω
4. –î–æ–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω —É —Ñ–∞–π–ª `.env`

## üåê API Endpoints

| Endpoint | –û–ø–∏—Å |
|----------|------|
| `GET /` | –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó |
| `GET /donations` | –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–æ–Ω–∞—Ç—ñ–≤ |
| `GET /obs` | OBS –æ–≤–µ—Ä–ª–µ–π |
| `GET /api/donations/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–Ω–∞—Ç—ñ–≤ |
| `GET /api/donations/top` | –¢–æ–ø –¥–æ–Ω–∞—Ç–µ—Ä—ñ–≤ |
| `GET /api/donations/recent` | –û—Å—Ç–∞–Ω–Ω—ñ –¥–æ–Ω–∞—Ç–∏ |
| `GET /api/test-donation` | –¢–µ—Å—Ç–æ–≤–∏–π –¥–æ–Ω–∞—Ç |
| `GET /api/jar/camera` | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –±–∞–Ω–∫—É |
| `GET /camera-jar` | –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –±–∞–Ω–∫–∏ –¥–ª—è –∫–∞–º–µ—Ä–∏ |

## üé• –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è OBS

### –û–≤–µ—Ä–ª–µ–π –¥–æ–Ω–∞—Ç—ñ–≤
1. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π **Browser Source**
2. URL: `http://localhost:3000/obs`
3. –®–∏—Ä–∏–Ω–∞: `1920`, –í–∏—Å–æ—Ç–∞: `1080`
4. –£–≤—ñ–º–∫–Ω—ñ—Ç—å **Shutdown source when not visible**
5. –£–≤—ñ–º–∫–Ω—ñ—Ç—å **Refresh browser when scene becomes active**

### –ë–∞–Ω–∫–∞ –¥–ª—è –∫–∞–º–µ—Ä–∏
1. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π **Browser Source**
2. URL: `http://localhost:3000/camera-jar`
3. –®–∏—Ä–∏–Ω–∞: `400`, –í–∏—Å–æ—Ç–∞: `300`
4. –ü–æ–∑–∏—Ü—ñ–æ–Ω—É–π—Ç–µ –ø–æ—Ä—É—á –∑ –∫–∞–º–µ—Ä–æ—é

### üîä –ó–≤—É–∫–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- –ó–≤—É–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –≤ OBS –æ–≤–µ—Ä–ª–µ—ó
- –†—ñ–∑–Ω—ñ –º–µ–ª–æ–¥—ñ—ó –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å—É–º –¥–æ–Ω–∞—Ç—ñ–≤
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥—É—á–Ω–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (üîä –∫–Ω–æ–ø–∫–∞)

## ‚ú® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

### üîÑ Real-time –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- WebSocket –∑'—î–¥–Ω–∞–Ω–Ω—è –¥–ª—è –º–∏—Ç—Ç—î–≤–∏—Ö —Å–ø–æ–≤—ñ—â–µ–Ω—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–∏ –æ–±—Ä–∏–≤—ñ –∑–≤'—è–∑–∫—É
- Fallback –Ω–∞ HTTP polling —è–∫—â–æ WebSocket –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π

### üé® –ê–Ω—ñ–º–∞—Ü—ñ—ó —Ç–∞ –µ—Ñ–µ–∫—Ç–∏
- –ü–ª–∞–≤–Ω—ñ CSS –∞–Ω—ñ–º–∞—Ü—ñ—ó —Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏
- –§–µ—î—Ä–≤–µ—Ä–∫–∏ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –¥–æ–Ω–∞—Ç—ñ–≤ (‚â•500 ‚Ç¥)
- Pulse –µ—Ñ–µ–∫—Ç–∏ —Ç–∞ –≥—Ä–∞–¥—ñ—î–Ω—Ç–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω –¥–ª—è –≤—Å—ñ—Ö –µ–∫—Ä–∞–Ω—ñ–≤

### üß† –†–æ–∑—É–º–Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —ñ–º–µ–Ω
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏—Ç—è–≥—É—î —ñ–º–µ–Ω–∞ –¥–æ–Ω–∞—Ç–µ—Ä—ñ–≤ –∑ –æ–ø–∏—Å—ñ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π:
- "–≤—ñ–¥ –Ü–º'—è" ‚Üí "–Ü–º'—è"
- "from Name" ‚Üí "Name"
- "–Ü–º'—è - –æ–ø–∏—Å" ‚Üí "–Ü–º'—è"
- Fallback –Ω–∞ "–ê–Ω–æ–Ω—ñ–º" —è–∫—â–æ —ñ–º'—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ –¥–æ–Ω–∞—Ç—ñ–≤
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- –£–Ω—ñ–∫–∞–ª—å–Ω—ñ –¥–æ–Ω–∞—Ç–µ—Ä–∏
- –¢–æ–ø –¥–æ–Ω–∞—Ç–µ—Ä—ñ–≤ (Hall of Fame)
- –û—Å—Ç–∞–Ω–Ω—ñ –¥–æ–Ω–∞—Ç–∏ –∑ —á–∞—Å–æ–º

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Backend**: Node.js, Express.js
- **Database**: SQLite3
- **WebSocket**: ws library
- **HTTP –∫–ª—ñ—î–Ω—Ç**: Axios
- **–ó–≤—É–∫**: node-lame (MP3 encoding)
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è**: Winston
- **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**: dotenv
- **Frontend**: Vanilla JavaScript, CSS3
- **API**: Monobank API v1

## üö® –ë–µ–∑–ø–µ–∫–∞

- –¢–æ–∫–µ–Ω Monobank –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –¥—É–±–ª—é–≤–∞–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Å—ñ—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ API

## üìù –õ–æ–≥—É–≤–∞–Ω–Ω—è

–°–µ—Ä–≤–µ—Ä –≤–µ–¥–µ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è:
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è WebSocket –∫–ª—ñ—î–Ω—Ç—ñ–≤
- –ù–æ–≤—ñ –¥–æ–Ω–∞—Ç–∏ –∑ —ñ–º–µ–Ω–∞–º–∏ —Ç–∞ —Å—É–º–∞–º–∏
- –ü–æ–º–∏–ª–∫–∏ API —Ç–∞ –º–µ—Ä–µ–∂—ñ
- –°—Ç–∞—Ç—É—Å —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ Monobank

## üéØ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–æ–Ω–∞—Ç—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ:
```
GET /api/test-donation
```

–ê–±–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É "üß™ –¢–µ—Å—Ç–æ–≤–∏–π –¥–æ–Ω–∞—Ç" –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –¥–æ–Ω–∞—Ç—ñ–≤.

## üîß –†–æ–∑—Ä–æ–±–∫–∞

–î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ –∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä –≤ —Ä–µ–∂–∏–º—ñ –ø–µ—Ä–µ–≥–ª—è–¥—É:
```bash
npm run dev
```

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü—Ä–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –ø—Ä–æ–±–ª–µ–º:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å MONO_TOKEN
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –ø–æ—Ä—Ç–∏ –Ω–µ –∑–∞–π–Ω—è—Ç—ñ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –∫–æ–Ω—Å–æ–ª—ñ
4. –°–ø—Ä–æ–±—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–∏–π –¥–æ–Ω–∞—Ç

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License - –¥–∏–≤—ñ—Ç—å—Å—è —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.